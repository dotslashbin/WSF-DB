<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="2.4" DspName="Microsoft.Data.Tools.Schema.Sql.Sql100DatabaseSchemaProvider" CollationLcid="1033" CollationCaseSensitive="False" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="False" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="False" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="100" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="DB_RPOWine.dll" />
			<Metadata Name="FileName" Value="D:\PROJECTS\PROJECTS_2014\ALEX\REPOS_DBPROJ\DB_RPOWINE\DB_RPOWINE\OBJ\DEBUG\DB_RPOWINE.DLL" />
			<Metadata Name="AssemblyName" Value="DB_RPOWine" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="D:\PROJECTS\PROJECTS_2014\Alex\Repos_DBProj\DB_RPOWine\DB_RPOWine\obj\Debug\DB_RPOWine.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable" />
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="SQL_Latin1_General_CP1_CI_AS" />
			<Property Name="IsAnsiPaddingOn" Value="False" />
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="IsCursorDefaultScopeGlobal" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="RecoveryMode" Value="1" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Relationship Name="DefaultFilegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[Flag]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="6" />
		</Element>
		<Element Type="SqlFilegroup" Name="[AuditLog]" />
		<Element Type="SqlTable" Name="[dbo].[Audit]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[EntryDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="7" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[TypeID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[CategoryID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[SourceID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[UserNameID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[MachineNameID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[ObjectTypeID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[ObjectID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="80" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit].[Message]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[text]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FilegroupForTextImage">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="8" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="9" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="10" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="11" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="12" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="13" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="14" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Audit].[Audit_GetList]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[ObjectTypeID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[ObjectID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[EntryDate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[TypeID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[CategoryID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[SourceID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[UserNameID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[MachineNameID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Audit_Add]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on
declare @Result int,
	@TypeID int, @CategoryID int, @SourceID int, @UserID int, @MachineID int, @ObjTypeID int

exec @TypeID = Audit_GetLookupID @ObjectName = 'entrytype', @ObjectValue = @Type
exec @CategoryID = Audit_GetLookupID @ObjectName = 'entrycategory', @ObjectValue = @Category
exec @SourceID = Audit_GetLookupID @ObjectName = 'entrysource', @ObjectValue = @Source
exec @UserID = Audit_GetLookupID @ObjectName = 'entryuser', @ObjectValue = @UserName
exec @MachineID = Audit_GetLookupID @ObjectName = 'entrymachine', @ObjectValue = @MachineName
exec @ObjTypeID = Audit_GetLookupID @ObjectName = 'objecttype', @ObjectValue = @ObjectType

if exists(select * from Audit_IDMapping (nolock) where ObjectTypeID = @ObjTypeID and OldObjectID = @ObjectID)
	select @ObjectID = NewObjectID from Audit_IDMapping (nolock) where ObjectTypeID = @ObjTypeID and OldObjectID = @ObjectID

insert into Audit ([EntryDate], [TypeID], [CategoryID], [SourceID], [UserNameID], [MachineNameID], 
	[ObjectTypeID], [ObjectID], [Description], [Message])
values (isnull(@EntryDate, getdate()), @TypeID, @CategoryID, @SourceID, @UserID, @MachineID, 
	@ObjTypeID, @ObjectID, @Description, @Message)
if @@error <> 0 begin
	select @Result = -1
end else begin
	select @Result = scope_identity()
end

if @ShowRes = 1 ---> always return new ID in the ADD procedure
	select Result = isnull(@Result, -1)

RETURN isnull(@Result, -1)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@MachineName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_IDMapping]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_IDMapping].[ObjectTypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_IDMapping].[OldObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_IDMapping]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_IDMapping].[NewObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_IDMapping].[ObjectTypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_IDMapping].[OldObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[EntryDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[CategoryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[SourceID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[UserNameID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[MachineNameID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ObjectTypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@EntryDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ShowRes]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@ID]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@EntryDate]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@Type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@Category]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@Source]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@UserName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@MachineName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@ObjectType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@ObjectID]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="80" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@Description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@Message]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA['']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[text]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_Add].[@ShowRes]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="192" />
				<Property Name="Length" Value="1969" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B&#xD;&#xA;-- Create date: 1/22/14&#xD;&#xA;-- Description:&#x9;Adds new record to Audit Log.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[Audit_Add]&#xD;&#xA;&#x9;@ID int = NULL,&#xD;&#xA;&#x9;@EntryDate datetime = NULL, @Type varchar(50), @Category varchar(50), &#xD;&#xA;&#x9;@Source varchar(50), @UserName varchar(50), @MachineName varchar(50), &#xD;&#xA;&#x9;@ObjectType varchar(50), @ObjectID varchar(80) = NULL,&#xD;&#xA;&#x9;@Description varchar(256), @Message text = '',&#xD;&#xA;&#x9;@ShowRes smallint = 1&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Audit_EntryCategories]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryCategories].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryCategories].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryCategories].[DateOp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="15" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="16" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Audit_EntryMachines]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryMachines].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryMachines].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryMachines].[DateOp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="17" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="18" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Audit_EntrySources]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntrySources].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntrySources].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntrySources].[DateOp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="19" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="20" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Audit_EntryTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryTypes].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryTypes].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryTypes].[DateOp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="21" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="22" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Audit_EntryUsers]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryUsers].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryUsers].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryUsers].[DateOp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="23" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_EntryUsers].[Flag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="6" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="24" />
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Audit_GetList]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on

declare @TotalCount int

if @ID is NOT NUll and @ID < 0
	set @ID = NULL

if @ID is NULL and @EntryDate is NULL and @Type is NULL and @Category is NULL 
	and @Source is NULL and @UserName is NULL and @MachineName is NULL 
	and	@ObjectType is NULL and @ObjectID is NULL 
	and @Description is NULL and @Message is NULL
	and @DateOpFrom is NULL and @DateOpTo is NULL begin
	
	raiserror('[USERERROR]: At least one filter parameter must be specified.', 16, 1)
	RETURN -1
end

if @DateOpTo is NOT NULL and datepart(hour,@DateOpFrom)=0 and datepart(minute,@DateOpFrom)=0
	and datepart(hour,@DateOpTo)=0 and datepart(minute,@DateOpTo)=0
	select @DateOpTo = dateadd(minute, 23*60+59, @DateOpTo)

if datalength(@Message) > 0 begin
	declare @searchStr nvarchar(256)
	set @searchStr = '%' + replace(substring(@Message, 0, 253), '[', '[[]') + '%'

	select @TotalCount = count(*)
	from Audit a (nolock)
		join Audit_EntryTypes at (nolock) on a.TypeID = at.ID
		join Audit_EntryCategories ac (nolock) on a.CategoryID = ac.ID
		--join Audit_EntrySources s (nolock) on a.SourceID = s.ID
		join Audit_EntryUsers au (nolock) on a.UserNameID = au.ID
		--join Audit_EntryMachines am (nolock) on a.MachineNameID = am.ID
		join Audit_ObjectTypes aot (nolock) on a.ObjectTypeID = aot.ID
	where a.ID = isnull(@ID, a.ID) 
		and EntryDate >= isnull(@EntryDate, '1/1/2000') 
		and upper(at.Name) = upper(isnull(@Type, at.Name)) 
		and upper(ac.Name) = upper(isnull(@Category, ac.Name)) 
		and upper(aot.Name) = upper(isnull(@ObjectType, aot.Name)) 
		and upper(ObjectID) = upper(isnull(@ObjectID, ObjectID)) 
		and upper(au.Name) = upper(isnull(@UserName, au.Name)) 
		and Message like @searchStr
		and (@DateOpFrom is NULL or @DateOpTo is NULL or (EntryDate >= @DateOpFrom and EntryDate <= @DateOpTo))

	; with r as (
		select
			ID = a.ID, 
			EntryDate, 
			Type = at.Name, 
			Category = ac.Name, 
			Source = s.Name, 
			UserName = au.Name, 
			MachineName = am.Name, 
			ObjectType = aot.Name, 
			ObjectID, 
			Description,
			Message = case when isnull(@ShowRes, 0) = 2 then '' else Message end,
			RowNumber = row_number() over (order by a.ID desc),
			TotalCount = isnull(@TotalCount, 0)
		from Audit a (nolock)
			join Audit_EntryTypes at (nolock) on a.TypeID = at.ID
			join Audit_EntryCategories ac (nolock) on a.CategoryID = ac.ID
			join Audit_EntrySources s (nolock) on a.SourceID = s.ID
			join Audit_EntryUsers au (nolock) on a.UserNameID = au.ID
			join Audit_EntryMachines am (nolock) on a.MachineNameID = am.ID
			join Audit_ObjectTypes aot (nolock) on a.ObjectTypeID = aot.ID
		where a.ID = isnull(@ID, a.ID) 
			and EntryDate >= isnull(@EntryDate, '1/1/2000') 
			and upper(at.Name) = upper(isnull(@Type, at.Name)) 
			and upper(ac.Name) = upper(isnull(@Category, ac.Name)) 
			and upper(aot.Name) = upper(isnull(@ObjectType, aot.Name)) 
			and upper(ObjectID) = upper(isnull(@ObjectID, ObjectID)) 
			and upper(au.Name) = upper(isnull(@UserName, au.Name)) 
			and Message like @searchStr
			and (@DateOpFrom is NULL or @DateOpTo is NULL or (EntryDate >= @DateOpFrom and EntryDate <= @DateOpTo))
	)
	select top 300 * from r
	where (@StartRow is NULL or @EndRow is NULL or (RowNumber between @StartRow and @EndRow))
	order by ID desc

end else begin
	select @TotalCount = count(*)
	from Audit a (nolock)
		join Audit_EntryTypes at (nolock) on a.TypeID = at.ID
		join Audit_EntryCategories ac (nolock) on a.CategoryID = ac.ID
		--join Audit_EntrySources s (nolock) on a.SourceID = s.ID
		join Audit_EntryUsers au (nolock) on a.UserNameID = au.ID
		--join Audit_EntryMachines am (nolock) on a.MachineNameID = am.ID
		join Audit_ObjectTypes aot (nolock) on a.ObjectTypeID = aot.ID
	where a.ID = isnull(@ID, a.ID) 
		and EntryDate >= isnull(@EntryDate, '1/1/2000') 
		and upper(at.Name) = upper(isnull(@Type, at.Name)) 
		and upper(ac.Name) = upper(isnull(@Category, ac.Name)) 
		and upper(aot.Name) = upper(isnull(@ObjectType, aot.Name)) 
		and upper(ObjectID) = upper(isnull(@ObjectID, ObjectID)) 
		and upper(au.Name) = upper(isnull(@UserName, au.Name))
		and (@DateOpFrom is NULL or @DateOpTo is NULL or (EntryDate >= @DateOpFrom and EntryDate <= @DateOpTo))

	; with r as (
		select 
			ID = a.ID, 
			EntryDate, 
			Type = at.Name, 
			Category = ac.Name, 
			Source = s.Name, 
			UserName = au.Name, 
			MachineName = am.Name, 
			ObjectType = aot.Name, 
			ObjectID, 
			Description,
			Message = case when isnull(@ShowRes, 0) = 2 then '' else Message end,
			RowNumber = row_number() over (order by a.ID desc),
			TotalCount = isnull(@TotalCount, 0)
		from Audit a (nolock)
			join Audit_EntryTypes at (nolock) on a.TypeID = at.ID
			join Audit_EntryCategories ac (nolock) on a.CategoryID = ac.ID
			join Audit_EntrySources s (nolock) on a.SourceID = s.ID
			join Audit_EntryUsers au (nolock) on a.UserNameID = au.ID
			join Audit_EntryMachines am (nolock) on a.MachineNameID = am.ID
			join Audit_ObjectTypes aot (nolock) on a.ObjectTypeID = aot.ID
		where a.ID = isnull(@ID, a.ID) 
			and EntryDate >= isnull(@EntryDate, '1/1/2000') 
			and upper(at.Name) = upper(isnull(@Type, at.Name)) 
			and upper(ac.Name) = upper(isnull(@Category, ac.Name)) 
			and upper(aot.Name) = upper(isnull(@ObjectType, aot.Name)) 
			and upper(ObjectID) = upper(isnull(@ObjectID, ObjectID)) 
			and upper(au.Name) = upper(isnull(@UserName, au.Name))
			and (@DateOpFrom is NULL or @DateOpTo is NULL or (EntryDate >= @DateOpFrom and EntryDate <= @DateOpTo))
	)
	select top 300 * from r
	where (@StartRow is NULL or @EndRow is NULL or (RowNumber between @StartRow and @EndRow))
	order by ID desc

end

RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@EntryDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@Type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@Category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@MachineName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@Description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@DateOpFrom]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@DateOpTo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[CategoryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[UserNameID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ObjectTypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[EntryDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntrySources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[SourceID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntrySources].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[UserNameID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[MachineNameID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ObjectTypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[EntryDate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntrySources].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@ShowRes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@StartRow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetList].[@EndRow]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Audit_GetList].[CTE1].[r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[EntryDate]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[EntryDate]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryTypes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[Category]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryCategories].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[Source]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntrySources].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[UserName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryUsers].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[MachineName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryMachines].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[ObjectType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_ObjectTypes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[ObjectID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[ObjectID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[Message]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[RowNumber]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE1].[r].[TotalCount]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Audit_GetList].[CTE2].[r]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[EntryDate]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[EntryDate]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[Type]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryTypes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[Category]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryCategories].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[Source]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntrySources].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[UserName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryUsers].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[MachineName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_EntryMachines].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[ObjectType]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit_ObjectTypes].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[ObjectID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[ObjectID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[Description]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[Audit].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[Message]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[RowNumber]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Audit_GetList].[CTE2].[r].[TotalCount]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@ID]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@EntryDate]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@Type]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@Category]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@Source]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@UserName]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@MachineName]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@ObjectType]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@ObjectID]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="80" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@Description]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@Message]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[ntext]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@DateOpFrom]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@DateOpTo]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@StartRow]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@EndRow]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetList].[@ShowRes]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="6329" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[Audit_GetList]&#xD;&#xA;&#x9;@ID int = NULL,&#xD;&#xA;&#x9;@EntryDate datetime = NULL, @Type varchar(50) = NULL, @Category varchar(50) = NULL, &#xD;&#xA;&#x9;@Source varchar(50) = NULL, @UserName varchar(50) = NULL, @MachineName varchar(50) = NULL, &#xD;&#xA;&#x9;@ObjectType varchar(50) = NULL, @ObjectID varchar(80) = NULL,&#xD;&#xA;&#x9;@Description nvarchar(256) = NULL, @Message ntext = NULL,&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;@DateOpFrom smalldatetime = NULL, @DateOpTo smalldatetime = NULL,&#xD;&#xA;&#x9;@StartRow int = NULL, @EndRow int = NULL,&#xD;&#xA;&#x9;@ShowRes smallint = 1&#xD;&#xA;&#xD;&#xA;/*&#xD;&#xA;exec Audit_GetList @ObjectType='WineProducer', @Message='&quot;name&quot;: &quot;Test'&#xD;&#xA;*/&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Audit_GetLookupID]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on

declare @Result int
set @ObjectValue = ltrim(rtrim(isnull(@ObjectValue, '')))

if (lower(@ObjectName) = 'entrytype') begin
	select @Result = ID from Audit_EntryTypes (nolock) where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and len(isnull(@ObjectValue,'')) > 0 begin
		insert into Audit_EntryTypes (Name) values (@ObjectValue)
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'entrycategory') begin
	select @Result = ID from Audit_EntryCategories (nolock) where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and len(isnull(@ObjectValue,'')) > 0 begin
		insert into Audit_EntryCategories (Name) values (@ObjectValue)
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'entrysource') begin
	select @Result = ID from Audit_EntrySources (nolock) where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and len(isnull(@ObjectValue,'')) > 0 begin
		insert into Audit_EntrySources (Name) values (@ObjectValue)
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'entryuser') begin
	select @Result = ID from Audit_EntryUsers (nolock) where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and len(isnull(@ObjectValue,'')) > 0 begin
		insert into Audit_EntryUsers (Name) values (@ObjectValue)
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'entrymachine') begin
	select @Result = ID from Audit_EntryMachines (nolock) where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 begin	-- and len(isnull(@ObjectValue,'')) > 0 begin
		insert into Audit_EntryMachines (Name) values (@ObjectValue)
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'objecttype') begin
	select @Result = ID from Audit_ObjectTypes (nolock) where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and len(isnull(@ObjectValue,'')) > 0 begin
		insert into Audit_ObjectTypes (Name) values (@ObjectValue)
		select @Result = scope_identity()
	end
end

if isnull(@Result, 0) < 1
	raiserror('Cannot find or create an entry in the [%s] with value [%s].', 16, 1, @ObjectName, @ObjectValue)

RETURN isnull(@Result, 0)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntrySources]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntrySources].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntrySources].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[Name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetLookupID].[@ObjectName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Audit_GetLookupID].[@ObjectValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="365" />
				<Property Name="Length" Value="2697" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B&#xD;&#xA;-- Create date: 1/22/14&#xD;&#xA;-- Description:&#x9;Gets internal ID of the lookup record.&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;It will automatically add new records into lookup tables, if necessary.&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;Used in Audit_Add stored procedure and not intended to be used anywhere else.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[Audit_GetLookupID]&#xD;&#xA;&#x9;@ObjectName as varchar(30), @ObjectValue as varchar(50)&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Audit_IDMapping]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_IDMapping].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_IDMapping].[ObjectTypeID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_IDMapping].[OldObjectID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="80" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_IDMapping].[NewObjectID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="80" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_IDMapping].[DateOp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="25" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="26" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="27" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Audit_ObjectTypes]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_ObjectTypes].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_ObjectTypes].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Audit_ObjectTypes].[DateOp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="28" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="29" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_EntryCategories_DateOp]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[DateOp]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="15" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_EntryDate]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit].[EntryDate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="7" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_EntryMachines_DateOp]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines].[DateOp]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="17" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_EntrySources_DateOp]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntrySources]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_EntrySources].[DateOp]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="19" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_EntryTypes_DateOp]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[DateOp]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="21" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_EntryUsers_DateOp]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[DateOp]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="23" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_IDMapping_DateOp]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_IDMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_IDMapping].[DateOp]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="25" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Audit_ObjectTypes_DateOp]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[DateOp]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="28" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationCountry_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationCountry].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="30" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationCountry_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationCountry].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="31" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationLocale_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationLocale].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="32" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationLocale_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationLocale].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="33" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationLocation_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationLocation].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="34" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationLocation_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationLocation].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="35" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationRegion_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationRegion].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="36" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationRegion_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationRegion].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="37" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationSite_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationSite].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="38" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_LocationSite_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[LocationSite].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="39" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Publication_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publication]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Publication].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="40" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Publication_TasteNote_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publication_TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Publication_TasteNote].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="41" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Publisher_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publisher]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Publisher].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="42" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Publisher_IsPrimary]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publisher]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Publisher].[IsPrimary]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="43" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Reviewer_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Reviewer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Reviewer].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="44" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Reviewer_oldRevIdn]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Reviewer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Reviewer].[oldReviewerIdN]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="45" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Reviewer_UserId]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Reviewer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Reviewer].[UserId]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="46" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Reviewer_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Reviewer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Reviewer].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="47" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TasteNote_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TasteNote].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="48" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TasteNote_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TasteNote].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="49" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_TasteNotes_IsBarrelTasting]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[TasteNote].[IsBarrelTasting]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="50" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WF_Statuses_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WF_Statuses].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="51" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Wine_N_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Wine_N].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="52" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Wine_N_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Wine_N].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="53" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Wine_VinN_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="54" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Wine_VinN_GroupID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="55" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_Wine_VinN_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="56" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineBottle_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineBottleSize]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineBottleSize].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="57" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineBottle_Volume]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineBottleSize]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineBottleSize].[Volume]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="58" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineBottle_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineBottleSize]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineBottleSize].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="59" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineColor_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineColor].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="60" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineColor_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineColor].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="61" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineDryne_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineDryness].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="62" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineDryne_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineDryness].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="63" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineLabel_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineLabel].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="64" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineLabel_DefaultColorID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((-1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultColorID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="65" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineLabel_DefaultDrynessID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((-1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultDrynessID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="66" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineLabel_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineLabel].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="67" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineMaturity_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineMaturity]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineMaturity].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="68" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineProducer_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineProducer].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="69" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineProducer_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineProducer].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="70" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineType_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineType].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="71" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineType_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineType].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="72" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineVarie_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineVariety].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="73" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineVarie_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineVariety].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="74" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineVintage_created]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineVintage].[created]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="75" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[dbo].[DF_WineVintage_WF_StatusID]">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[WineVintage].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="76" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Audit_Audit_EntryCategories]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Audit].[CategoryID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="9" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Audit_Audit_EntryMachines]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Audit].[MachineNameID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="10" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Audit_Audit_EntrySources]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Audit].[SourceID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Audit_EntrySources].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Audit_EntrySources]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="11" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Audit_Audit_EntryTypes]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Audit].[TypeID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="12" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Audit_Audit_EntryUsers]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Audit].[UserNameID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="13" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Audit_Audit_ObjectTypes]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Audit].[ObjectTypeID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="14" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_LocationCountry_WF_Statuses]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[LocationCountry].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WF_Statuses].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="77" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_LocationLocale_WF_Statuses]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[LocationLocale].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WF_Statuses].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="78" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_LocationLocation_WF_Statuses]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[LocationLocation].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WF_Statuses].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="79" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_LocationRegion_WF_Statuses]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[LocationRegion].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WF_Statuses].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="80" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_LocationSite_WF_Statuses]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[LocationSite].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WF_Statuses].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="81" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Publication_Publisher]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Publication].[PublisherID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publication]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Publisher].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Publisher]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="82" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Publication_TasteNote_Publication]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Publication_TasteNote].[PublicationID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publication_TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Publication].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Publication]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="83" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Publication_TasteNote_TasteNote]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Publication_TasteNote].[TasteNoteID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publication_TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[TasteNote].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="84" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TasteNote_Reviewer]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TasteNote].[ReviewerID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Reviewer].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Reviewer]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="85" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TasteNote_Wine_N]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TasteNote].[Wine_N_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Wine_N].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="86" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_TasteNote_WineMaturity]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[TasteNote].[MaturityID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineMaturity].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineMaturity]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="87" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_N_Wine_VinN]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_N].[Wine_VinN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="88" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_N_WineVintage]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_N].[VintageID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineVintage].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="89" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_LocationCountry]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="90" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_LocationLocale]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="91" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_LocationLocation]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="92" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_LocationRegion]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="93" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_LocationSite]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="94" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_WineColor]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="95" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_WineDryness]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="96" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_WineLabel]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="97" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_WineProducer]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="98" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_WineType]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="99" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_Wine_VinN_WineVariety]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="100" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_WineProducer_LocationCountry]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[WineProducer].[locCountryID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="101" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_WineProducer_LocationLocale]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocaleID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="102" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_WineProducer_LocationLocation]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocationID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="103" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_WineProducer_LocationRegion]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[WineProducer].[locRegionID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="104" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[dbo].[FK_WineProducer_LocationSite]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[WineProducer].[locSiteID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="105" />
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[fn_GetAdjustedSearchString]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_GetAdjustedSearchString].[@SearchString]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine].[Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine].[Destination]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine].[Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[String2Table]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine].[Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[String2Table].[Item]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[String2Table].[Item]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine].[Destination]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN

	-- ===== special keywords =====
	declare @newSearchString nvarchar(1024) = '',
		@sS nvarchar(120), @sD nvarchar(240)

	-- complex phrases
	if charindex(' ', @SearchString) > 0 begin
		declare crPh CURSOR forward_only fast_forward read_only for
			select Source, Destination 
			from KeywordMap_Wine km (nolock) 
			where charindex(' ', km.Source) > 0
				and @SearchString like '%' + km.Source + '%'
		open crPh
		fetch next from crPh into @sS, @sD
		while @@fetch_status = 0 begin
			if @sS is NOT NULL begin
				select @SearchString = replace(@SearchString, @sS, '')
				if len(@newSearchString) > 0
					select @newSearchString += ' AND ' 
				select @newSearchString += case when @sD is null then @sS else @sD end
			end
			fetch next from crPh into @sS, @sD
		end
		close crPh
		deallocate crPh
	end

	select @SearchString = rtrim(ltrim(@SearchString))

	-- single words
	if len(@SearchString) > 0 begin
		if isnull(charindex(' ', @SearchString), 0) < 1 begin
			if len(@newSearchString) > 0
				select @newSearchString += ' AND ' 
			select @sD = Destination from KeywordMap_Wine (nolock) where Source = @SearchString
			select @newSearchString += case when @sD is null then @SearchString else @sD end
		end else begin
			declare cr CURSOR forward_only fast_forward read_only for
				select Source = f.Item, Destination 
				from dbo.String2Table(@SearchString, ' ') f 
					left join KeywordMap_Wine km (nolock) on km.Source = replace(f.Item, '"' , '')
				where f.Item != '""'

			open cr
			fetch next from cr into @sS, @sD
			while @@fetch_status = 0 begin
				if @sS is NOT NULL begin
					if len(@newSearchString) > 0
						select @newSearchString += ' AND ' 
					select @newSearchString += case when @sD is null then @sS else @sD end
				end
				fetch next from cr into @sS, @sD
			end
			close cr
			deallocate cr
		end
	end
	-- ===== end of special keywords =====

	RETURN @newSearchString

END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="404" />
							<Property Name="Length" Value="2494" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author: Alex B.&#xD;&#xA;-- Create date: 1/18/2014&#xD;&#xA;-- Description:&#x9;Adjusts a string using &quot;macroses&quot; defined in the KeywordMap_Wine&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;AND prepares it to be used in the full text search quesries (no spaces inside)&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;Used in Wine and WineVin search queries. &#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;Macroses are for the Label Name.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE FUNCTION fn_GetAdjustedSearchString&#xD;&#xA;(&#xD;&#xA;&#x9;@SearchString nvarchar(1024)&#xD;&#xA;)&#xD;&#xA;RETURNS nvarchar(1024)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[fn_GetAdjustedSearchString].[@SearchString]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Length" Value="1024" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[fn_GetObjectDescription]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_GetObjectDescription].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WebSiteURL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_GetObjectDescription].[@ObjectID]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
BEGIN
	declare @msg nvarchar(1024)

	if (lower(@ObjectName) = 'wineproducer') begin
		select @msg = '{"WineProducer": {'
			+ '"id": ' + cast(ID as varchar(20)) 
			+ ', "name": "' + Name + '"'
			+ ', "nameToShow": "' + NameToShow + '"'
			+ ', "WebSiteURL": "' + isnull(WebSiteURL, '') + '"'
			+ '}}'
		from WineProducer (nolock)
		where ID = @ObjectID
	end
	
	RETURN @msg
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="272" />
							<Property Name="Length" Value="796" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author: Alex B.&#xD;&#xA;-- Create date: 1/22/2014&#xD;&#xA;-- Description:&#x9;Gets description of the record in JSON format.&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;Used to auto generate text in AuditLog functionality.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE FUNCTION [dbo].[fn_GetObjectDescription]&#xD;&#xA;(&#xD;&#xA;&#x9;@ObjectName as varchar(30), @ObjectID as int&#xD;&#xA;)&#xD;&#xA;RETURNS nvarchar(1024)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[fn_GetObjectDescription].[@ObjectName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[fn_GetObjectDescription].[@ObjectID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Length" Value="1024" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[dbo].[IX_Audit_IDMapping]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_IDMapping].[ObjectTypeID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_IDMapping].[OldObjectID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_IDMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="27" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[KeywordMap_Wine]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[KeywordMap_Wine].[Source]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[KeywordMap_Wine].[Destination]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="240" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="106" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[KeywordMap_Wine].[IX_KeywordMap_Wine_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[KeywordMap_Wine].[Source]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine].[Destination]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Location_GetLookupID]">
			<Property Name="BodyScript">
				<Value><![CDATA[
set nocount on

declare @Result int
set @ObjectValue = ltrim(rtrim(@ObjectValue))

-- allow 0 values - each lookup table has an entry with ID = 0
if @ObjectValue is NULL or @ObjectValue = ''
	RETURN 0

if (lower(@ObjectName) = 'loccountry') begin
	select @Result = ID from LocationCountry where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into LocationCountry (Name) values (left(@ObjectValue, 25))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'loclocale') begin
	select @Result = ID from LocationLocale where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into LocationLocale (Name) values (left(@ObjectValue, 50))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'loclocation') begin
	select @Result = ID from LocationLocation where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into LocationLocation (Name) values (left(@ObjectValue, 50))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'locregion') begin
	select @Result = ID from LocationRegion where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into LocationRegion (Name) values (left(@ObjectValue, 50))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'locsite') begin
	select @Result = ID from LocationSite where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into LocationSite (Name) values (left(@ObjectValue, 50))
		select @Result = scope_identity()
	end
end

-- allow 0 values - each lookup table has an entry with ID = 0
--if isnull(@Result, 0) < 1
--	raiserror('Cannot find or create an entry in the [%s] with value "%s".', 16, 1, @ObjectName, @ObjectValue)
	
RETURN isnull(@Result, 0)]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@IsAutoCreate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Location_GetLookupID].[@ObjectName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Location_GetLookupID].[@ObjectValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Location_GetLookupID].[@IsAutoCreate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="302" />
				<Property Name="Length" Value="2737" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B&#xD;&#xA;-- Create date: 1/20/14&#xD;&#xA;-- Description:&#x9;Gets internal ID of the lookup record.&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;It will automatically add new records into lookup tables, if necessary AND @IsAutoCreate = 1.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[Location_GetLookupID]&#xD;&#xA;&#x9;@ObjectName as varchar(30), @ObjectValue as nvarchar(120),&#xD;&#xA;&#x9;@IsAutoCreate bit = 1&#xD;&#xA;&#xD;&#xA;--&#xD;&#xA;-- Gets ID of the lookup record if exists or creates a new entry and returns new ID.&#xD;&#xA;-- Location lookups are essentially cache tables, therefore &quot;cache rules&quot; - auto create - are applied by default.&#xD;&#xA;--&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[LocationCountry]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationCountry].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationCountry].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="2" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationCountry].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="25" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationCountry].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="30" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationCountry].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationCountry].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="31" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="107" />
			<AttachedAnnotation Disambiguator="77" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[LocationCountry].[IX_LocationCountry_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationCountry].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[LocationLocale]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocale].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocale].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocale].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="32" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocale].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocale].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="33" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="108" />
			<AttachedAnnotation Disambiguator="78" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[LocationLocale].[IX_LocationLocale_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationLocale].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[LocationLocation]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocation].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocation].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocation].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="34" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocation].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationLocation].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="35" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="109" />
			<AttachedAnnotation Disambiguator="79" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[LocationLocation].[IX_LocationLocation_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationLocation].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[LocationRegion]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationRegion].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationRegion].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationRegion].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="36" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationRegion].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationRegion].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="37" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="110" />
			<AttachedAnnotation Disambiguator="80" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[LocationRegion].[IX_LocationRegion_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationRegion].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[LocationSite]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationSite].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationSite].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationSite].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="38" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationSite].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[LocationSite].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="39" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="111" />
			<AttachedAnnotation Disambiguator="81" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[LocationSite].[IX_LocationSite_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationSite].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="8" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit_EntryCategories]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_EntryCategories].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryCategories]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="16" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit_EntryMachines]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_EntryMachines].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryMachines]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="18" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit_EntrySources]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_EntrySources].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntrySources]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="20" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit_EntryTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_EntryTypes].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="22" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit_EntryUsers]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_EntryUsers].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="24" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit_IDMapping]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_IDMapping].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_IDMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="26" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Audit_ObjectTypes]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Audit_ObjectTypes].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Audit_ObjectTypes]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[AuditLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="29" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_BottleSize]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineBottleSize].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineBottleSize]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="112" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_KeywordMap_Wine]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[KeywordMap_Wine].[Source]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[KeywordMap_Wine]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="106" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_LocationCountry]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationCountry].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="107" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_LocationLocale]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationLocale].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="108" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_LocationLocation]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationLocation].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="109" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_LocationRegion]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationRegion].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="110" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_LocationSite]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[LocationSite].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="111" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Publication]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Publication].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publication]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="113" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Publication_TasteNote]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Publication_TasteNote].[PublicationID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Publication_TasteNote].[TasteNoteID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publication_TasteNote]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="114" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Publisher]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Publisher].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Publisher]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="115" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Reviewer]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Reviewer].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Reviewer]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="116" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_TasteNote]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[TasteNote].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[TasteNote]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[TasteNotes]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="117" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WF_Statuses]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WF_Statuses].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="118" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Wine_N]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_N].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="119" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_Wine_VinN]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="120" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineColor]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineColor].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="121" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineDryness]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineDryness].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="122" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineLabel]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineLabel].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="123" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineMaturity]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineMaturity].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineMaturity]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="124" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineProducer]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineProducer].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="125" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineType].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="126" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineVariety]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineVariety].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="127" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[dbo].[PK_WineVintage]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineVintage].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="128" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Publication]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication].[PublisherID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="40" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="113" />
			<AttachedAnnotation Disambiguator="82" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Publication].[IX_Publication_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Publication].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Publication].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Publication]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Publication_TasteNote]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication_TasteNote].[PublicationID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication_TasteNote].[TasteNoteID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publication_TasteNote].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="41" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="114" />
			<AttachedAnnotation Disambiguator="83" />
			<AttachedAnnotation Disambiguator="84" />
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Publisher]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publisher].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publisher].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publisher].[IsPrimary]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="43" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publisher].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="42" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Publisher].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="115" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Publisher].[IX_Publisher_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Publisher].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Publisher].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Publisher]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Reviewer]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Reviewer].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Reviewer].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Reviewer].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="46" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Reviewer].[oldReviewerIdN]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="45" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Reviewer].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="44" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Reviewer].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Reviewer].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="47" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="116" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Reviewer].[IX_Reviewer_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Reviewer].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Reviewer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Reviewer].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Reviewer]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[String2Table]">
			<Property Name="ReturnTableVariable" Value="@Items" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[String2Table].[@ItemsStr]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[String2Table].[@sepCharacter]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[String2Table].[Item]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[String2Table].[Item]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
begin
	declare 
			@ItemsList nvarchar(4000),
			@Item nvarchar(50), 
			@Pos int
	if datalength(@ItemsStr)<= 4000 --otherwise returns empty table
	begin
		select @ItemsList = LTRIM(RTRIM(cast(@ItemsStr as nvarchar(4000)))) + @sepCharacter
		select @Pos = CHARINDEX(@sepCharacter, @ItemsList, 1)
		if REPLACE(@ItemsList, @sepCharacter, '') <> '' begin
			while @Pos > 0 begin
				select @Item = LTRIM(RTRIM(LEFT(@ItemsList, @Pos - 1)))
				if @Item <> '' begin
					insert into @Items (Item) values (CAST(@Item AS nvarchar(50)))
				end
				select @ItemsList = RIGHT(@ItemsList, LEN(@ItemsList) + case when @sepCharacter = ' ' then 1 else 0 end - @Pos)
				select @Pos = CHARINDEX(@sepCharacter, @ItemsList, 1)
			end
		end	
	end
	return 
end]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1037" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[String2Table] &#xD;&#xA;(&#x9;&#xD;&#xA;&#x9;@ItemsStr ntext&#x9;&#x9;&#x9;&#x9;&#x9;-- list of values to be parsed&#xD;&#xA;&#x9;, @sepCharacter char(1) = ','&#x9;-- list separator character&#xD;&#xA;)&#xD;&#xA;--&#xD;&#xA;-- Parses list of comma separated Items into @Items table&#xD;&#xA;--&#xD;&#xA;&#xD;&#xA;RETURNS @Items TABLE (Item nvarchar(50))&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[String2Table].[@ItemsStr]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[ntext]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[String2Table].[@sepCharacter]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[',']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[TasteNote]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[ReviewerID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[Wine_N_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[ProducerNoteID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[TasteDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[MaturityID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[Rating_Lo]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[Rating_Hi]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[DrinkDate_Lo]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[DrinkDate_Hi]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[IsBarrelTasting]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="50" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[oldIdn]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[Notes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="48" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="49" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[PublicationDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[TasteNote].[OriginID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FilegroupForTextImage">
				<Entry>
					<References Name="[TasteNotes]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="117" />
			<AttachedAnnotation Disambiguator="85" />
			<AttachedAnnotation Disambiguator="86" />
			<AttachedAnnotation Disambiguator="87" />
		</Element>
		<Element Type="SqlFullTextIndex" Name="[dbo].[vWineDetails]" Disambiguator="5">
			<Property Name="IsStopListOff" Value="True" />
			<Property Name="DoUseSystemStopList" Value="False" />
			<Relationship Name="Catalog">
				<Entry>
					<References Name="[RPOWine_FTSearchWine]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineDetails].[Keywords]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[WineIndx]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[vWineDetails]" />
				</Entry>
			</Relationship>
			<Relationship Name="KeyName">
				<Entry>
					<References Name="[dbo].[vWineDetails].[PK_vWineDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[vWineDetails]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

	select 
		Wine_N_ID = wn.ID, Wine_VinN_ID = vn.ID, 
		Wine_VinN_GroupID = vn.GroupID,

		Country = lc.Name, Region = lr.Name, Location = ll.Name, 
		Locale = lloc.Name, Site = ls.Name,
		Appellation = coalesce(
			nullif(ls.Name,''), nullif(lloc.name,''), nullif(ll.name,''), nullif(lr.name,''), nullif(lc.name,'')
		),

		Producer = wp.Name, ProducerToShow = wp.NameToShow,
		[Type] = wt.Name, Label = wl.Name,
		Variety = wv.Name, Dryness = wd.Name, Color = wc.Name,
		Vintage = wvin.Name,
		
		Name = rtrim(ltrim(wp.NameToShow + ' ' + wl.Name + ' ' + wv.Name + ' ' + wvin.Name) + case
			when wl.DefaultDrynessID != wd.ID then ' ' + wd.Name
			else ''
		end + case
			when wl.DefaultColorID != wc.ID then ' ' + wc.Name
			else ''
		end),
		
		Keywords = isnull(lc.Name, '') + ' ' + isnull(lr.Name, '') 
			+ ' ' + isnull(ll.Name, '') + ' ' + isnull(lloc.Name, '') + ' ' + isnull(ls.Name,'')
			+ ' ' + isnull(wp.Name, '') + ' ' + isnull(wp.NameToShow, '') 
			+ ' ' + isnull(wt.Name, '') + ' ' + isnull(wl.Name, '')
			+ ' ' + isnull(wv.Name, '') + ' ' + isnull(wd.Name, '') + ' ' + isnull(wc.Name, '')
			+ ' ' + isnull(wvin.Name, ''),
		
		locCountryID = vn.locCountryID, locRegionID = vn.locRegionID,
		locLocationID = vn.locLocationID, locLocaleID = vn.locLocaleID, locSiteID = vn.locSiteID,
		ProducerID = vn.ProducerID, TypeID = vn.TypeID, LabelID = vn.LabelID,
		VarietyID = vn.VarietyID, DrynessID = vn.DrynessID, ColorID = vn.ColorID,
		VintageID = wn.VintageID,
		
		oldIdn = wn.oldIdn, oldEntryN = wn.oldEntryN, 
		oldFixedId = wn.oldFixedId, oldWineNameIdN = wn.oldWineNameIdN,

		Wine_N_WF_StatusID = wn.WF_StatusID
	from dbo.Wine_N wn
		join dbo.Wine_VinN vn on wn.Wine_VinN_ID = vn.ID

		join dbo.WineProducer wp on vn.ProducerID = wp.ID
		join dbo.WineType wt on vn.TypeID = wt.ID
		join dbo.WineLabel wl on vn.LabelID = wl.ID
		join dbo.WineVariety wv on vn.VarietyID = wv.ID
		join dbo.WineDryness wd on vn.DrynessID = wd.ID
		join dbo.WineColor wc on vn.ColorID = wc.ID
		join dbo.WineVintage wvin on wn.VintageID = wvin.ID

		join dbo.LocationCountry lc on vn.locCountryID = lc.ID
		join dbo.LocationRegion lr on vn.locRegionID = lr.ID
		join dbo.LocationLocation ll on vn.locLocationID = ll.ID
		join dbo.LocationLocale lloc on vn.locLocaleID = lloc.ID
		join dbo.LocationSite ls on vn.locSiteID = ls.ID
	--where wn.WF_StatusID > 99]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Wine_N_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_N].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Wine_VinN_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Wine_VinN_GroupID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[GroupID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Country]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationCountry].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Region]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationRegion].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationLocation].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Locale]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationLocale].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Site]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationSite].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Appellation]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Producer]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineProducer].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[ProducerToShow]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineProducer].[NameToShow]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineType].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Label]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineLabel].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Variety]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineVariety].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Dryness]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineDryness].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Color]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineColor].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Vintage]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineVintage].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Name]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Keywords]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[locCountryID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locCountryID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[locRegionID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locRegionID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[locLocationID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocationID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[locLocaleID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[locSiteID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locSiteID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[ProducerID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ProducerID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[TypeID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[TypeID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[LabelID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[LabelID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[VarietyID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[VarietyID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[DrynessID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[DrynessID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[ColorID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ColorID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[VintageID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_N].[VintageID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[oldIdn]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_N].[oldIdn]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[oldEntryN]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_N].[oldEntryN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[oldFixedId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_N].[oldFixedId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[oldWineNameIdN]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_N].[oldWineNameIdN]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineDetails].[Wine_N_WF_StatusID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_N].[WF_StatusID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[VintageID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultDrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[VintageID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[oldIdn]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[oldEntryN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[oldFixedId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[oldWineNameIdN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2477" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE VIEW [dbo].[vWineDetails]&#xD;&#xA;WITH SCHEMABINDING&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[vWineDetails].[PK_vWineDetails]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineDetails].[Wine_N_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[WineIndx]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[vWineDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextIndex" Name="[dbo].[vWineVinNDetails]" Disambiguator="4">
			<Property Name="IsStopListOff" Value="True" />
			<Property Name="DoUseSystemStopList" Value="False" />
			<Relationship Name="Catalog">
				<Entry>
					<References Name="[RPOWine_FTSearchVin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Country]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Region]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Location]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Locale]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Site]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Appellation]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Producer]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[ProducerToShow]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Type]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Label]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Variety]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Dryness]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFullTextIndexColumnSpecifier">
						<Property Name="LanguageId" Value="1033" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Color]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[WineIndx]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[vWineVinNDetails]" />
				</Entry>
			</Relationship>
			<Relationship Name="KeyName">
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[PK_vWineVinNDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlView" Name="[dbo].[vWineVinNDetails]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

	select 
		Wine_VinN_ID = vn.ID, 
		Wine_VinN_GroupID = vn.GroupID,

		Country = lc.Name, Region = lr.Name, Location = ll.Name, 
		Locale = lloc.Name, Site = ls.Name,
		Appellation = coalesce(
			nullif(ls.Name,''), nullif(lloc.name,''), nullif(ll.name,''), nullif(lr.name,''), nullif(lc.name,'')
		),

		Producer = wp.Name, ProducerToShow = wp.NameToShow,
		[Type] = wt.Name, Label = wl.Name, 
		Variety = wv.Name, Dryness = wd.Name, Color = wc.Name,
		
		Name = rtrim(ltrim( rtrim(ltrim(wp.NameToShow + ' ' + wl.Name)) + ' ' + wv.Name)),

		locCountryID = vn.locCountryID, locRegionID = vn.locRegionID,
		locLocationID = vn.locLocationID, locLocaleID = vn.locLocaleID, locSiteID = vn.locSiteID,
		ProducerID = vn.ProducerID, TypeID = vn.TypeID, LabelID = vn.LabelID,
		VarietyID = vn.VarietyID, DrynessID = vn.DrynessID, ColorID = vn.ColorID,
		
		Wine_VinN_WF_StatusID = vn.WF_StatusID
	from dbo.Wine_VinN vn

		join dbo.WineProducer wp on vn.ProducerID = wp.ID
		join dbo.WineType wt on vn.TypeID = wt.ID
		join dbo.WineLabel wl on vn.LabelID = wl.ID
		join dbo.WineVariety wv on vn.VarietyID = wv.ID
		join dbo.WineDryness wd on vn.DrynessID = wd.ID
		join dbo.WineColor wc on vn.ColorID = wc.ID

		join dbo.LocationCountry lc on vn.locCountryID = lc.ID
		join dbo.LocationRegion lr on vn.locRegionID = lr.ID
		join dbo.LocationLocation ll on vn.locLocationID = ll.ID
		join dbo.LocationLocale lloc on vn.locLocaleID = lloc.ID
		join dbo.LocationSite ls on vn.locSiteID = ls.ID
	--where vn.WF_StatusID > 99]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Wine_VinN_ID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Wine_VinN_GroupID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[GroupID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Country]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationCountry].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Region]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationRegion].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Location]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationLocation].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Locale]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationLocale].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Site]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[LocationSite].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Appellation]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Producer]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineProducer].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[ProducerToShow]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineProducer].[NameToShow]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Type]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineType].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Label]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineLabel].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Variety]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineVariety].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Dryness]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineDryness].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Color]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[WineColor].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Name]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[locCountryID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locCountryID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[locRegionID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locRegionID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[locLocationID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocationID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[locLocaleID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[locSiteID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locSiteID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[ProducerID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ProducerID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[TypeID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[TypeID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[LabelID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[LabelID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[VarietyID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[VarietyID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[DrynessID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[DrynessID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[ColorID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ColorID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[dbo].[vWineVinNDetails].[Wine_VinN_WF_StatusID]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="4" />
				<Property Name="Length" Value="1617" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;&#xD;&#xA;CREATE VIEW [dbo].[vWineVinNDetails]&#xD;&#xA;WITH SCHEMABINDING&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[vWineVinNDetails].[PK_vWineVinNDetails]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="IsClustered" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[WineIndx]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[vWineVinNDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WF_Statuses]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WF_Statuses].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WF_Statuses].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WF_Statuses].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="51" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="118" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WF_Statuses].[IX_WF_Statuses_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WF_Statuses].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WF_Statuses].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Wine_GetList_ByVinID]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on

select 
	Wine_N_ID = w.ID,
	Wine_VinN_ID = w.Wine_VinN_ID,
	VintageID = w.VintageID,
	Vintage = wv.Name,
	Wine_V_WF_StatusID = w.WF_StatusID
from Wine_N w (nolock)
	join WineVintage wv (nolock) on w.VintageID = wv.ID
where w.Wine_VinN_ID = @Wine_VinN_ID
order by Vintage

RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[VintageID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[VintageID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_GetList_ByVinID].[@Wine_VinN_ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Wine_GetList_ByVinID].[@Wine_VinN_ID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="222" />
				<Property Name="Length" Value="596" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B&#xD;&#xA;-- Create date: 1/19/2014&#xD;&#xA;-- Description:&#x9;Gets list of all Vintages available for a specified VinID&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE Wine_GetList_ByVinID&#xD;&#xA;&#x9;@Wine_VinN_ID int&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Wine_GetLookupID]">
			<Property Name="BodyScript">
				<Value><![CDATA[
set nocount on

declare @Result int
set @ObjectValue = ltrim(rtrim(@ObjectValue))

--------------- simple 
if (lower(@ObjectName) = 'winebottlesize') begin
	select @Result = ID from WineBottleSize where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineBottleSize (Name) values (left(@ObjectValue, 30))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'winecolor') begin
	select @Result = ID from WineColor where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineColor (Name) values (left(@ObjectValue, 30))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'winedryness') begin
	select @Result = ID from WineDryness where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineDryness (Name) values (left(@ObjectValue, 30))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'winelabel') begin
	select @Result = ID from WineLabel where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineLabel (Name) values (left(@ObjectValue, 120))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'winetype') begin
	select @Result = ID from WineType where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineType (Name) values (left(@ObjectValue, 50))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'winevariety') begin
	select @Result = ID from WineVariety where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineVariety (Name) values (left(@ObjectValue, 50))
		select @Result = scope_identity()
	end
end

if (lower(@ObjectName) = 'winevintage') begin
	select @Result = ID from WineVintage where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineVintage (Name) values (left(@ObjectValue, 4))
		select @Result = scope_identity()
	end
end

------------- complex
if (lower(@ObjectName) = 'wineproducer') begin
	select @Result = ID from WineProducer where lower(Name) = lower(@ObjectValue)
	if isnull(@Result, 0) < 1 and @IsAutoCreate = 1 and len(@ObjectValue) > 0 begin
		insert into WineProducer (Name, NameToShow) values (left(@ObjectValue, 100), left(@ObjectValue, 100))
		select @Result = scope_identity()
	end
end

if isnull(@Result, 0) < 1
	raiserror('Cannot find or create an entry in the [%s] with value "%s".', 16, 1, @ObjectName, @ObjectValue)
	
RETURN isnull(@Result, 0)]]></Value>
			</Property>
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineBottleSize]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineBottleSize].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineBottleSize].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_GetLookupID].[@IsAutoCreate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Wine_GetLookupID].[@ObjectName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Wine_GetLookupID].[@ObjectValue]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Wine_GetLookupID].[@IsAutoCreate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="302" />
				<Property Name="Length" Value="3564" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B&#xD;&#xA;-- Create date: 1/22/14&#xD;&#xA;-- Description:&#x9;Gets internal ID of the lookup record.&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;It will automatically add new records into lookup tables, if necessary AND @IsAutoCreate = 1.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[Wine_GetLookupID]&#xD;&#xA;&#x9;@ObjectName as varchar(30), @ObjectValue as nvarchar(120),&#xD;&#xA;&#x9;@IsAutoCreate bit = 1&#xD;&#xA;&#xD;&#xA;--&#xD;&#xA;-- Gets ID of the lookup record if exists or creates a new entry and returns new ID.&#xD;&#xA;-- Wine lookups are essentially cache tables, therefore &quot;cache rules&quot; - auto create - are applied by default.&#xD;&#xA;--&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Wine_N]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[Wine_VinN_ID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[VintageID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[oldIdn]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[oldEntryN]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[oldFixedId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[oldWineNameIdN]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="52" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_N].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="53" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="119" />
			<AttachedAnnotation Disambiguator="88" />
			<AttachedAnnotation Disambiguator="89" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_N].[IX_Wine_N_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_N].[Wine_VinN_ID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_N].[VintageID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_N].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_N].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_N]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[Wine_SearchFT]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on
SET ARITHABORT ON
SET CONCAT_NULL_YIELDS_NULL ON
SET QUOTED_IDENTIFIER ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
SET NUMERIC_ROUNDABORT OFF

select @SearchString = replace(replace(rtrim(ltrim(@SearchString)), '%', '*'), '  ', ' ')

-- applying macroses
select @SearchString = dbo.fn_GetAdjustedSearchString(@SearchString)

if @isDebug = 1
	print @SearchString

--------- Results --------
select -- top(@topNRows) -->> cannot use here because of sorting
	Wine_N_ID, Wine_VinN_ID, Wine_VinN_GroupID,
	locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
	ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,	VintageID
into #t
from vWineDetails where contains(*, @SearchString)

if @@rowcount > 100 begin
	if @isDebug = 1
		print '--- Creating Index on #t ---'
	CREATE NONCLUSTERED INDEX [IX_t] ON #t (
		[ColorID] ASC
	) WITH (SORT_IN_TEMPDB = ON);
end

--; with r as (
--	select WineN_ID, 
--		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
--		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,	VintageID
--	from vWineDetails where contains(*, @SearchString)
--)
select top(@topNRows)
	Wine_N_ID = r.Wine_N_ID,
	Wine_VinN_ID = r.Wine_VinN_ID, 
	Wine_VinN_GroupID = r.Wine_VinN_GroupID,
	Country = lc.Name, Region = lr.Name, Location = ll.Name, 
	Locale = lloc.Name, Site = ls.Name,
	Producer = wp.Name, ProducerToShow = wp.NameToShow,
	[Type] = wt.Name, Label = wl.Name,
	Variety = wv.Name, Dryness = wd.Name, Color = wc.Name,
	Vintage = wvin.Name
from #t r
	join dbo.LocationCountry lc (nolock) on r.locCountryID = lc.ID
	join dbo.LocationRegion lr (nolock) on r.locRegionID = lr.ID
	join dbo.LocationLocation ll (nolock) on r.locLocationID = ll.ID
	join dbo.LocationLocale lloc (nolock) on r.locLocaleID = lloc.ID
	join dbo.LocationSite ls (nolock) on r.locSiteID = ls.ID

	join dbo.WineProducer wp (nolock) on r.ProducerID = wp.ID
	join dbo.WineType wt (nolock) on r.TypeID = wt.ID
	join dbo.WineLabel wl (nolock) on r.LabelID = wl.ID
	join dbo.WineVariety wv (nolock) on r.VarietyID = wv.ID
	join dbo.WineDryness wd (nolock) on r.DrynessID = wd.ID
	join dbo.WineColor wc (nolock) on r.ColorID = wc.ID
	join dbo.WineVintage wvin (nolock) on r.VintageID = wvin.ID
order by Country, Producer, Type, Label, Vintage

drop table #t

/*
-- CONTAINSTABLE
declare @SS nvarchar(400) = replace(replace(replace(@SearchString, ' AND ', ''), ' OR ', ''), ' ', ' AND ')
select v.* , fts.RANK
from vWineDetails v
	join CONTAINSTABLE(vWineDetails, 
		(Producer,WineType,LabelName,Variety,Dryness,ColorClass,Country,Region,Location,Locale,Site), 
		@SS, @topNRows) fts
	on v.VinN_ID = fts.[KEY]
where fts.RANK > @rankLimit
order by fts.RANK desc

-- FREETEXTTABLE
select v.* , fts.RANK
from vWineDetails v
	join FREETEXTTABLE(vWineDetails, 
		(Producer,WineType,LabelName,Variety,Dryness,ColorClass,Country,Region,Location,Locale,Site), 
		@SearchString, @topNRows) fts
	on v.VinN_ID = fts.[KEY]
where fts.RANK > @rankLimit
order by fts.RANK desc
*/

RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[@SearchString]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_GetAdjustedSearchString]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[@isDebug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[Wine_N_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[Wine_VinN_GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[VintageID]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[VintageID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[@topNRows]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[Wine_N_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_SearchFT].[#t].[Wine_VinN_GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVintage].[Name]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[Wine_SearchFT].[#t]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[Wine_N_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[Wine_N_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[Wine_VinN_ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[Wine_VinN_ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[Wine_VinN_GroupID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[Wine_VinN_GroupID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[locCountryID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[locCountryID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[locRegionID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[locRegionID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[locLocationID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[locLocationID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[locLocaleID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[locLocaleID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[locSiteID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[locSiteID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[ProducerID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[ProducerID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[TypeID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[TypeID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[LabelID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[LabelID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[VarietyID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[VarietyID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[DrynessID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[DrynessID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[ColorID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[ColorID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[Wine_SearchFT].[#t].[VintageID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[VintageID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Wine_SearchFT].[@SearchString]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Wine_SearchFT].[@topNRows]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[30]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Wine_SearchFT].[@isDebug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3261" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[Wine_SearchFT]&#xD;&#xA;&#x9;@SearchString nvarchar(1024), &#xD;&#xA;&#x9;@topNRows int = 30, --@rankLimit int = 20,&#xD;&#xA;&#x9;@isDebug bit = 0&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[Wine_VinN]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[GroupID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="55" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[ProducerID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[TypeID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[LabelID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[VarietyID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[DrynessID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[ColorID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[locCountryID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[locRegionID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[locLocationID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[locLocaleID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[locSiteID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="54" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[Wine_VinN].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="56" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="120" />
			<AttachedAnnotation Disambiguator="90" />
			<AttachedAnnotation Disambiguator="91" />
			<AttachedAnnotation Disambiguator="92" />
			<AttachedAnnotation Disambiguator="93" />
			<AttachedAnnotation Disambiguator="94" />
			<AttachedAnnotation Disambiguator="95" />
			<AttachedAnnotation Disambiguator="96" />
			<AttachedAnnotation Disambiguator="97" />
			<AttachedAnnotation Disambiguator="98" />
			<AttachedAnnotation Disambiguator="99" />
			<AttachedAnnotation Disambiguator="100" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_VinN].[IX_Wine_VinN_LabelID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[LabelID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_VinN].[IX_Wine_VinN_locCountryID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locCountryID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_VinN].[IX_Wine_VinN_locLocaleID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_VinN].[IX_Wine_VinN_locLocationID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocationID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_VinN].[IX_Wine_VinN_locRegionID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locRegionID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_VinN].[IX_Wine_VinN_locSiteID]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locSiteID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[Wine_VinN].[IX_Wine_VinN_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ProducerID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[TypeID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[LabelID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[VarietyID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[DrynessID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[ColorID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locCountryID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locRegionID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocationID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[Wine_VinN].[locSiteID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[Wine]" />
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineBottleSize]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineBottleSize].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineBottleSize].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineBottleSize].[Volume]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="58" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineBottleSize].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="57" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineBottleSize].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineBottleSize].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="59" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="112" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineBottleSize].[IX_WineBottleSize_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineBottleSize].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineBottleSize].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineBottleSize]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineColor]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineColor].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineColor].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineColor].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="60" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineColor].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineColor].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="61" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="121" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineColor].[IX_WineColor_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineColor].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineDryness]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineDryness].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineDryness].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineDryness].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="62" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineDryness].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineDryness].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="63" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="122" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineDryness].[IX_WineDryness_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineDryness].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineLabel]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineLabel].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineLabel].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="120" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineLabel].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="64" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineLabel].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineLabel].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="67" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineLabel].[DefaultColorID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="65" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineLabel].[DefaultDrynessID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="66" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="123" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineLabel].[IX_WineLabel_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineLabel].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultDrynessID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineMaturity]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineMaturity].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineMaturity].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineMaturity].[Suggestion]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineMaturity].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="68" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineMaturity].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="124" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineMaturity].[IX_WineMaturity_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineMaturity].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineMaturity].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineMaturity]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineProducer]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[NameToShow]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[WebSiteURL]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[locCountryID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[locRegionID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[locLocationID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[locLocaleID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[locSiteID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[Profile]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[ContactInfo]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="69" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="70" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[CreatorID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineProducer].[EditorID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="125" />
			<AttachedAnnotation Disambiguator="101" />
			<AttachedAnnotation Disambiguator="102" />
			<AttachedAnnotation Disambiguator="103" />
			<AttachedAnnotation Disambiguator="104" />
			<AttachedAnnotation Disambiguator="105" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineProducer].[IX_WineProducer_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineProducer].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[WineProducer_Add]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on
set xact_abort on

declare @Result int, 
		@CreatorID int

select @Name = rtrim(ltrim(@Name)), @NameToShow = rtrim(ltrim(isnull(@NameToShow, @Name)))

------------ Checks
if len(isnull(@Name, '')) < 1 begin
	raiserror('WineProducer_Add:: @Name is required.', 16, 1)
	RETURN -1
end

if exists(select * from WineProducer (nolock) where upper(Name) = upper(@Name)) begin
	raiserror('[USERERROR]:: Wine Producer with the same Name already exists.', 16, 1)
	RETURN -1
end

------------ Checks
if len(isnull(@UserName, '')) < 1 begin
	raiserror('WineProducer_Add:: @UserName is required.', 16, 1)
	RETURN -1
end
exec @CreatorID = Audit_GetLookupID @ObjectName = 'entryuser', @ObjectValue = @UserName
------------ Checks

------------ Lookup IDs
declare @locCountryID int, @locRegionID int, @locLocationID int, @locLocaleID int, @locSiteID int
exec @locCountryID = Location_GetLookupID @ObjectName='locCountry', @ObjectValue=@locCountry, @IsAutoCreate=1
exec @locRegionID = Location_GetLookupID @ObjectName='locRegion', @ObjectValue=@locRegion, @IsAutoCreate=1
exec @locLocationID = Location_GetLookupID @ObjectName='locLocation', @ObjectValue=@locLocation, @IsAutoCreate=1
exec @locLocaleID = Location_GetLookupID @ObjectName='locLocale', @ObjectValue=@locLocale, @IsAutoCreate=1
exec @locSiteID = Location_GetLookupID @ObjectName='locSite', @ObjectValue=@locSite, @IsAutoCreate=1
------------ Lookup IDs

BEGIN TRY
	BEGIN TRANSACTION

	insert into WineProducer (Name, NameToShow, WebSiteURL,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		[Profile], ContactInfo,
		created, updated, WF_StatusID, CreatorID, EditorID)
	values (@Name, @NameToShow, @WebSiteURL,
		@locCountryID, @locRegionID, @locLocationID, @locLocaleID, @locSiteID,
		@Profile, @ContactInfo,
		getdate(), null, isnull(@WF_StatusID, 0), @CreatorID, null)
	if @@error <> 0 begin
		select @Result = -1
		ROLLBACK TRAN
	end else begin
		select @Result = scope_identity()
		declare @msg nvarchar(1024) = dbo.fn_GetObjectDescription('WineProducer', @Result)
		exec Audit_Add @Type='Success', @Category='Add', @Source='SQL', @UserName=@UserName, @MachineName='', 
			@ObjectType='WineProducer', @ObjectID=@Result, @Description='WineProducer added', @Message=@msg,
			@ShowRes=0
	end

	COMMIT TRANSACTION
END TRY
BEGIN CATCH
	declare @errSeverity int,
			@errMsg nvarchar(2048)
	select	@errSeverity = ERROR_SEVERITY(),
			@errMsg = ERROR_MESSAGE()

    -- Test XACT_STATE:
        -- If 1, the transaction is committable.
        -- If -1, the transaction is uncommittable and should be rolled back.
        -- XACT_STATE = 0 means that there is no transaction and a commit or rollback operation would generate an error.
    if (xact_state() = 1 or xact_state() = -1)
		ROLLBACK TRAN

	raiserror(@errMsg, @errSeverity, 1)
END CATCH

if @ShowRes = 1 ---> always return new ID in the ADD procedure
	select Result = isnull(@Result, -1)

RETURN isnull(@Result, -1)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_GetObjectDescription]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@locCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@IsAutoCreate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@locRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@locLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@locLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@locSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WebSiteURL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Profile]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ContactInfo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[created]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[updated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[CreatorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[EditorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@WebSiteURL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@Profile]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@ContactInfo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@MachineName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ShowRes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Add].[@ShowRes]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@Name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@NameToShow]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@WebSiteURL]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@locCountry]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@locRegion]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@locLocation]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@locLocale]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@locSite]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@Profile]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@ContactInfo]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@WF_StatusID]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@UserName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Add].[@ShowRes]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="188" />
				<Property Name="Length" Value="3896" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B.&#xD;&#xA;-- Create date: 1/22/2014&#xD;&#xA;-- Description:&#x9;Adds new WineProducer.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[WineProducer_Add]&#xD;&#xA;&#x9;--@ID int = NULL, &#xD;&#xA;&#x9;@Name nvarchar(100), @NameToShow nvarchar(100),&#xD;&#xA;&#x9;@WebSiteURL nvarchar(255) = NULL,&#xD;&#xA;&#x9;@locCountry nvarchar(50) = NULL, @locRegion nvarchar(50) = NULL, &#xD;&#xA;&#x9;@locLocation nvarchar(50) = NULL, @locLocale nvarchar(50) = NULL, @locSite nvarchar(50) = NULL,&#xD;&#xA;&#x9;@Profile nvarchar(max) = NULL, @ContactInfo nvarchar(max) = NULL, &#xD;&#xA;&#x9;&#xD;&#xA;&#x9;@WF_StatusID int = NULL,&#xD;&#xA;&#x9;@UserName varchar(50),&#xD;&#xA;&#x9;@ShowRes smallint = 1&#xD;&#xA;&#x9;&#xD;&#xA;/*&#xD;&#xA;declare @r int&#xD;&#xA;exec @r = WineProducer_Add&#xD;&#xA;&#x9;@Name = 'Test WP', @NameToShow = NULL, @WebSiteURL = 'http://url.com',&#xD;&#xA;&#x9;@locCountry = 'Italy',&#xD;&#xA;&#x9;@WF_StatusID = NULL,&#xD;&#xA;&#x9;@UserName = 'test'&#xD;&#xA;select @r&#xD;&#xA;*/&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[WineProducer_Del]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on
set xact_abort on

declare @Result int 

------------ Checks
if not exists(select * from WineProducer (nolock) where ID = @ID) begin
	raiserror('WineProducer_Del:: Wine Producer record with ID [%i] does not exist.', 16, 1, @ID)
	RETURN -1
end

if exists(select * from Wine_VinN (nolock) where ProducerID = @ID) begin
	raiserror('[USERERROR]:: Wine Producer cannot be deleted because there are Wine records associated with this producer.', 16, 1)
	RETURN -1
end

------------ Checks
if len(isnull(@UserName, '')) < 1 begin
	raiserror('WineProducer_Del:: @UserName is required.', 16, 1)
	RETURN -1
end
--exec @EditorID = Audit_GetLookupID @ObjectName = 'entryuser', @ObjectValue = @UserName
------------ Checks

BEGIN TRY
	BEGIN TRANSACTION

	declare @msg nvarchar(1024) = dbo.fn_GetObjectDescription('WineProducer', @ID)
	
	delete WineProducer where ID = @ID
	select @Result = @@ROWCOUNT
	if @@error <> 0 begin
		select @Result = -1
		ROLLBACK TRAN
	end else begin
		exec Audit_Add @Type='Success', @Category='Delete', @Source='SQL', @UserName=@UserName, @MachineName='', 
			@ObjectType='WineProducer', @ObjectID=@ID, @Description='WineProducer deleted', @Message=@msg,
			@ShowRes=0
	end

	COMMIT TRANSACTION
END TRY
BEGIN CATCH
	declare @errSeverity int,
			@errMsg nvarchar(2048)
	select	@errSeverity = ERROR_SEVERITY(),
			@errMsg = ERROR_MESSAGE()

    -- Test XACT_STATE:
        -- If 1, the transaction is committable.
        -- If -1, the transaction is uncommittable and should be rolled back.
        -- XACT_STATE = 0 means that there is no transaction and a commit or rollback operation would generate an error.
    if (xact_state() = 1 or xact_state() = -1)
		ROLLBACK TRAN

	raiserror(@errMsg, @errSeverity, 1)
END CATCH

if @ShowRes = 1
	select Result = isnull(@Result, -1)

RETURN isnull(@Result, -1)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_GetObjectDescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Del].[@ID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Del].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@MachineName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ShowRes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Del].[@ShowRes]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Del].[@ID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Del].[@UserName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Del].[@ShowRes]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="194" />
				<Property Name="Length" Value="2319" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B.&#xD;&#xA;-- Create date: 1/22/2014&#xD;&#xA;-- Description:&#x9;Deletes WineProducer record.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[WineProducer_Del]&#xD;&#xA;&#x9;@ID int, &#xD;&#xA;&#xD;&#xA;&#x9;@UserName varchar(50),&#xD;&#xA;&#x9;@ShowRes smallint = 1&#xD;&#xA;&#xD;&#xA;/*&#xD;&#xA;declare @r int&#xD;&#xA;exec @r = WineProducer_Del !-- Careful with ID --! @ID=14403, @UserName = 'test'&#xD;&#xA;select @r&#xD;&#xA;*/&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[WineProducer_GetList]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on

if @ID is not null begin
	select 
		ID = wp.ID,
		Name = wp.Name,
		NameToShow = wp.NameToShow,
		WebSiteURL = wp.WebSiteURL,
		locCountry = lc.Name,
		locRegion = lr.Name,
		locLocation = lloc.Name,
		locLocale = ll.Name,
		locSiteID = ls.Name,
		Profile = wp.Profile,
		ContactInfo = wp.ContactInfo,
		WF_StatusID = wp.WF_StatusID,
		WF_StatusName = wfs.Name,
		created = wp.created, 
		updated = wp.updated,
		CreatorName = isnull(creator.Name, 'system'),
		EditorName = isnull(editor.Name, '')
	from WineProducer wp (nolock)
		join WF_Statuses wfs (nolock) on wp.WF_StatusID = wfs.ID
		left join LocationCountry lc (nolock) on wp.locCountryID = lc.ID
		left join LocationRegion lr (nolock) on wp.locRegionID = lr.ID
		left join LocationLocation lloc (nolock) on wp.locLocationID = lloc.ID
		left join LocationLocale ll (nolock) on wp.locLocaleID = ll.ID
		left join LocationSite ls (nolock) on wp.locSiteID = ls.ID
		
		left join Audit_EntryUsers creator (nolock) on wp.CreatorID = creator.ID
		left join Audit_EntryUsers editor (nolock) on wp.EditorID = editor.ID
	where wp.ID > 0 
		and wp.ID = @ID
end else if @Name is NOT NULL begin
	if @Name is NOT NULL 
		select @Name = '%' + @Name + '%'

	select 
		ID = wp.ID,
		Name = wp.Name,
		NameToShow = wp.NameToShow,
		WebSiteURL = wp.WebSiteURL,
		locCountry = lc.Name,
		locRegion = lr.Name,
		locLocation = lloc.Name,
		locLocale = ll.Name,
		locSiteID = ls.Name,
		Profile = '',
		ContactInfo = '',
		WF_StatusID = wp.WF_StatusID,
		WF_StatusName = wfs.Name,
		created = wp.created, 
		updated = wp.updated,
		CreatorName = isnull(creator.Name, 'system'),
		EditorName = isnull(editor.Name, '')
	from WineProducer wp (nolock)
		join WF_Statuses wfs (nolock) on wp.WF_StatusID = wfs.ID
		left join LocationCountry lc (nolock) on wp.locCountryID = lc.ID
		left join LocationRegion lr (nolock) on wp.locRegionID = lr.ID
		left join LocationLocation lloc (nolock) on wp.locLocationID = lloc.ID
		left join LocationLocale ll (nolock) on wp.locLocaleID = ll.ID
		left join LocationSite ls (nolock) on wp.locSiteID = ls.ID
		
		left join Audit_EntryUsers creator (nolock) on wp.CreatorID = creator.ID
		left join Audit_EntryUsers editor (nolock) on wp.EditorID = editor.ID
	where wp.ID > 0 
		and wp.Name like @Name
	order by wp.Name, wp.ID
end else begin
	select 
		ID = wp.ID,
		Name = wp.Name,
		NameToShow = wp.NameToShow,
		WebSiteURL = wp.WebSiteURL,
		locCountry = lc.Name,
		locRegion = lr.Name,
		locLocation = lloc.Name,
		locLocale = ll.Name,
		locSiteID = ls.Name,
		Profile = '',
		ContactInfo = '',
		WF_StatusID = wp.WF_StatusID,
		WF_StatusName = wfs.Name,
		created = wp.created, 
		updated = wp.updated,
		CreatorName = isnull(creator.Name, 'system'),
		EditorName = isnull(editor.Name, '')
	from WineProducer wp (nolock)
		join WF_Statuses wfs (nolock) on wp.WF_StatusID = wfs.ID
		left join LocationCountry lc (nolock) on wp.locCountryID = lc.ID
		left join LocationRegion lr (nolock) on wp.locRegionID = lr.ID
		left join LocationLocation lloc (nolock) on wp.locLocationID = lloc.ID
		left join LocationLocale ll (nolock) on wp.locLocaleID = ll.ID
		left join LocationSite ls (nolock) on wp.locSiteID = ls.ID

		left join Audit_EntryUsers creator (nolock) on wp.CreatorID = creator.ID
		left join Audit_EntryUsers editor (nolock) on wp.EditorID = editor.ID
	where wp.ID > 0
	order by wp.Name, wp.ID
end
	
RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[WineProducer_GetList].[@ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WF_Statuses]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WF_Statuses].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[CreatorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[EditorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WebSiteURL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Profile]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ContactInfo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WF_Statuses].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[created]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[updated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_EntryUsers].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_GetList].[@Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_GetList].[@ID]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_GetList].[@Name]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="239" />
				<Property Name="Length" Value="4112" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B.&#xD;&#xA;-- Create date: 1/22/2014&#xD;&#xA;-- Description:&#x9;Gets List of WineProducers.&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;Input parameters are used as a filter.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[WineProducer_GetList]&#xD;&#xA;&#x9;@ID int = NULL, @Name nvarchar(100) = NULL&#xD;&#xA;&#x9;--@NameToShow nvarchar(100) = NULL,&#xD;&#xA;&#x9;--@locCountry nvarchar(50) = NULL, @locRegion nvarchar(50) = NULL, &#xD;&#xA;&#x9;--@locLocation nvarchar(50) = NULL, @locLocale nvarchar(50) = NULL, @locSite nvarchar(50) = NULL&#xD;&#xA;&#xD;&#xA;/*&#xD;&#xA;exec WineProducer_GetList @ID = NULL, @Name = 'monda'&#xD;&#xA;*/&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[WineProducer_Update]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on
set xact_abort on

declare @Result int, 
		@EditorID int

select @Name = nullif(rtrim(ltrim(@Name)), ''), 
	@NameToShow = nullif(rtrim(ltrim(@NameToShow)), ''),
	@WebSiteURL = nullif(rtrim(ltrim(@WebSiteURL)), '')

------------ Checks
if not exists(select * from WineProducer (nolock) where ID = @ID) begin
	raiserror('WineProducer_Update:: Wine Producer record with ID [%i] does not exist.', 16, 1, @ID)
	RETURN -1
end

if @Name is NOT NULL and exists(select * from WineProducer (nolock) where ID != @ID and upper(Name) = upper(@Name)) begin
	raiserror('[USERERROR]:: Wine Producer with the same Name already exists.', 16, 1)
	RETURN -1
end

------------ Checks
if len(isnull(@UserName, '')) < 1 begin
	raiserror('WineProducer_Update:: @UserName is required.', 16, 1)
	RETURN -1
end
exec @EditorID = Audit_GetLookupID @ObjectName = 'entryuser', @ObjectValue = @UserName
------------ Checks

------------ Lookup IDs
declare @locCountryID int, @locRegionID int, @locLocationID int, @locLocaleID int, @locSiteID int
exec @locCountryID = Location_GetLookupID @ObjectName='locCountry', @ObjectValue=@locCountry, @IsAutoCreate=1
exec @locRegionID = Location_GetLookupID @ObjectName='locRegion', @ObjectValue=@locRegion, @IsAutoCreate=1
exec @locLocationID = Location_GetLookupID @ObjectName='locLocation', @ObjectValue=@locLocation, @IsAutoCreate=1
exec @locLocaleID = Location_GetLookupID @ObjectName='locLocale', @ObjectValue=@locLocale, @IsAutoCreate=1
exec @locSiteID = Location_GetLookupID @ObjectName='locSite', @ObjectValue=@locSite, @IsAutoCreate=1
------------ Lookup IDs

BEGIN TRY
	BEGIN TRANSACTION

	update WineProducer set
		Name = isnull(@Name, Name), 
		NameToShow = isnull(@NameToShow, NameToShow), 
		WebSiteURL = isnull(@WebSiteURL, WebSiteURL),
		locCountryID = case when @locCountry is NULL then locCountryID else @locCountryID end, 
		locRegionID = case when @locRegion is NULL then locRegionID else @locRegionID end, 
		locLocationID = case when @locLocation is NULL then locLocationID else @locLocationID end, 
		locLocaleID = case when @locLocale is NULL then locLocaleID else @locLocaleID end,  
		locSiteID = case when @locSite is NULL then locSiteID else @locSiteID end, 
		[Profile] = isnull(@Profile, Profile), 
		ContactInfo = isnull(@ContactInfo, ContactInfo),
		updated = getdate(), 
		WF_StatusID = isnull(@WF_StatusID, WF_StatusID), 
		EditorID = @EditorID
	where ID = @ID

	select @Result = @@ROWCOUNT
	if @@error <> 0 begin
		select @Result = -1
		ROLLBACK TRAN
	end else begin
		declare @msg nvarchar(1024) = dbo.fn_GetObjectDescription('WineProducer', @ID)
		exec Audit_Add @Type='Success', @Category='Update', @Source='SQL', @UserName=@UserName, @MachineName='', 
			@ObjectType='WineProducer', @ObjectID=@ID, @Description='WineProducer updated', @Message=@msg,
			@ShowRes=0
	end

	COMMIT TRANSACTION
END TRY
BEGIN CATCH
	declare @errSeverity int,
			@errMsg nvarchar(2048)
	select	@errSeverity = ERROR_SEVERITY(),
			@errMsg = ERROR_MESSAGE()

    -- Test XACT_STATE:
        -- If 1, the transaction is committable.
        -- If -1, the transaction is uncommittable and should be rolled back.
        -- XACT_STATE = 0 means that there is no transaction and a commit or rollback operation would generate an error.
    if (xact_state() = 1 or xact_state() = -1)
		ROLLBACK TRAN

	raiserror(@errMsg, @errSeverity, 1)
END CATCH

if @ShowRes = 1
	select Result = isnull(@Result, -1)

RETURN isnull(@Result, -1)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_GetObjectDescription]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@ID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@WebSiteURL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@ObjectName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@ObjectValue]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@locCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Location_GetLookupID].[@IsAutoCreate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@locRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@locLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@locLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@locSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WebSiteURL]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Profile]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@Profile]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ContactInfo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@ContactInfo]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[updated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[EditorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Source]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@UserName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@MachineName]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ObjectID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Audit_Add].[@ShowRes]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer_Update].[@ShowRes]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@ID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@Name]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@NameToShow]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@WebSiteURL]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@locCountry]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@locRegion]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@locLocation]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@locLocale]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@locSite]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@Profile]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@ContactInfo]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@WF_StatusID]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@UserName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineProducer_Update].[@ShowRes]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="194" />
				<Property Name="Length" Value="4434" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B.&#xD;&#xA;-- Create date: 1/22/2014&#xD;&#xA;-- Description:&#x9;Updates WineProducer record.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[WineProducer_Update]&#xD;&#xA;&#x9;@ID int, &#xD;&#xA;&#x9;@Name nvarchar(100) = NULL, @NameToShow nvarchar(100) = NULL,&#xD;&#xA;&#x9;@WebSiteURL nvarchar(255) = NULL,&#xD;&#xA;&#x9;@locCountry nvarchar(50) = NULL, @locRegion nvarchar(50) = NULL, &#xD;&#xA;&#x9;@locLocation nvarchar(50) = NULL, @locLocale nvarchar(50) = NULL, @locSite nvarchar(50) = NULL,&#xD;&#xA;&#x9;@Profile nvarchar(max) = NULL, @ContactInfo nvarchar(max) = NULL, &#xD;&#xA;&#x9;&#xD;&#xA;&#x9;@WF_StatusID int = NULL,&#xD;&#xA;&#x9;@UserName varchar(50),&#xD;&#xA;&#x9;@ShowRes smallint = 1&#xD;&#xA;&#x9;&#xD;&#xA;/*&#xD;&#xA;declare @r int&#xD;&#xA;exec @r = WineProducer_Update&#xD;&#xA;&#x9;!--- careful! @ID = 14403, &#xD;&#xA;&#x9;@Name = '', @NameToShow = 'Testalonga',&#xD;&#xA;&#x9;@locCountry = 'France',&#xD;&#xA;&#x9;@WF_StatusID = 100,&#xD;&#xA;&#x9;@UserName = 'test'&#xD;&#xA;select @r&#xD;&#xA;&#xD;&#xA;*/&#x9;&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineType].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineType].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineType].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="71" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineType].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineType].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="72" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="126" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineType].[IX_WineType_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineType].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineVariety]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVariety].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVariety].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVariety].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="73" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVariety].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVariety].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="74" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="127" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineVariety].[IX_WineVariety_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineVariety].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[WineVin_Search]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on
SET ARITHABORT ON
SET CONCAT_NULL_YIELDS_NULL ON
SET QUOTED_IDENTIFIER ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
SET NUMERIC_ROUNDABORT OFF

select @SearchString = replace(replace(rtrim(ltrim(@SearchString)), '%', ''), '*', '')

if @SearchString is NULL or len(@SearchString) < 2 begin
	raiserror('Search String is required.', 16, 1)
	RETURN -1
end

if @isDebug = 1
	print @SearchString

--------- Results --------
create table #t (
	Wine_VinN_ID int not null, 
	Wine_VinN_GroupID int null,
	WF_StatusID int null,
	locCountryID int null, locRegionID int null, locLocationID int null, locLocaleID int null, locSiteID int null,
	ProducerID int null, TypeID int null, LabelID int null, VarietyID int null, DrynessID int null, ColorID int null,
	SortOrder smallint null
)

if isnull(lower(@FieldNameToSearch), '') in ('', 'labelname') begin
	select	@SearchString = '%' + replace(@SearchString, ' ', '%') + '%'
	if @isDebug = 1
		print @SearchString	
	
	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 0 else 20 end
		from WineLabel (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.LabelID
	order by f.SortOrder, f.Name;
end else if lower(@FieldNameToSearch) = 'extendedlabel' begin
	select	@SearchString = '%' + replace(@SearchString, ' ', '%') + '%'
	if @isDebug = 1
		print @SearchString	

	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 10 else 20 end
		from WineLabel (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.LabelID
	order by f.SortOrder, f.Name;
	
	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 12 else 22 end
		from WineProducer (nolock)
		where NameToShow like @SearchString
	)
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.LabelID
	order by f.SortOrder, f.Name;

	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 14 else 24 end
		from WineVariety (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.LabelID
	order by f.SortOrder, f.Name;
end else if lower(@FieldNameToSearch) = 'appellation' begin
	-- Appellation = coalesce(Site.Name, Locale.name, Location.name, Region.name, Country.name),
	select	@SearchString = '%' + replace(@SearchString, ' ', '%') + '%'
	if @isDebug = 1
		print @SearchString	

	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 10 else 40 end
		from LocationSite (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows/2)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.locSiteID
	order by f.SortOrder, f.Name;

	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 12 else 42 end
		from LocationLocale (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows/2)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.locLocaleID
	order by f.SortOrder, f.Name;

	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 14 else 44 end
		from LocationLocation (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows/2)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.locLocationID
	order by f.SortOrder, f.Name;

	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 16 else 46 end
		from LocationRegion (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows/2)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.locRegionID
	order by f.SortOrder, f.Name;

	; with f as (
		select ID, Name, 
			SortOrder = case when Name like right(@SearchString, len(@SearchString)-1) then 18 else 48 end
		from LocationCountry (nolock)
		where Name like @SearchString
	)
	insert into #t
	select top(@topNRows/2)
		Wine_VinN_ID = v.ID, Wine_VinN_GroupID = v.GroupID, 
		Wine_VinN_WF_StatusID = v.WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = f.SortOrder
	from f
		join Wine_VinN v on f.ID = v.locCountryID
	order by f.SortOrder, f.Name;

end else begin
	select @SearchString = '"' + replace(@SearchString, ' ', '*" and "') + '*"'
	if @isDebug = 1
		print @SearchString	

	select 
		Wine_VinN_ID = v.Wine_VinN_ID, 
		Label = v.Label,
		Producer = v.Producer, 
		ProducerToShow = v.ProducerToShow,
		Country = v.Country, Region = v.Region, Location = v.Location, Locale = v.Locale, Site = v.Site,
		Appellation = v.Appellation,
		Color = v.Color, Variety = v.Variety, Dryness = v.Dryness, WineType = v.[Type], 
		WF_StatusID = v.Wine_VinN_WF_StatusID
		--fts.RANK
	from vWineVinNDetails v
		join containstable(vWineVinNDetails, *, @SearchString, @topNRows) fts
			on v.Wine_VinN_ID = fts.[KEY]
	where fts.RANK > @rankLimit
	order by fts.RANK desc
	
	RETURN 1
end

/*
select top(@topNRows)
	Wine_VinN_ID = r.Wine_VinN_ID, 
	Label, Producer, ProducerToShow,
	Country, Region, Location, Locale, Site, Appellation,
	Color, Variety, Dryness, WineType = v.[Type], 
	WF_StatusID = r.WF_StatusID
from #t r
	join vWineVinNDetails v on r.Wine_VinN_ID = v.Wine_VinN_ID
order by SortOrder, Label, ProducerToShow, Variety
*/

select top(@topNRows)
	Wine_VinN_ID = r.Wine_VinN_ID, 
	Label = wl.Name,
	Producer = wp.Name, 
	ProducerToShow = wp.NameToShow,
	
	Country = lc.Name, Region = lr.Name, 
	Location = ll.Name, 
	Locale = lloc.Name, Site = ls.Name,
	Appellation = coalesce(
		nullif(ls.Name,''), nullif(lloc.name,''), nullif(ll.name,''), nullif(lr.name,''), nullif(lc.name,'')
	),
		
	Color = wc.Name,
	Variety = wv.Name, 
	Dryness = wd.Name,
	WineType = wt.Name, 

	WF_StatusID = r.WF_StatusID
from #t r
	join dbo.LocationCountry lc (nolock) on r.locCountryID = lc.ID
	join dbo.LocationRegion lr (nolock) on r.locRegionID = lr.ID
	join dbo.LocationLocation ll (nolock) on r.locLocationID = ll.ID
	join dbo.LocationLocale lloc (nolock) on r.locLocaleID = lloc.ID
	join dbo.LocationSite ls (nolock) on r.locSiteID = ls.ID

	join dbo.WineProducer wp (nolock) on r.ProducerID = wp.ID
	join dbo.WineType wt (nolock) on r.TypeID = wt.ID
	join dbo.WineLabel wl (nolock) on r.LabelID = wl.ID
	join dbo.WineVariety wv (nolock) on r.VarietyID = wv.ID
	join dbo.WineDryness wd (nolock) on r.DrynessID = wd.ID
	join dbo.WineColor wc (nolock) on r.ColorID = wc.ID
order by SortOrder, Label, Producer, Variety, Country
drop table #t

RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[WineVin_Search].[@SearchString]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[@isDebug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[@FieldNameToSearch]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[@topNRows]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[Wine_VinN].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_ID]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Label]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Producer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[ProducerToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Country]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Region]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Location]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Locale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Site]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Appellation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Color]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Variety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Dryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_WF_StatusID]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[WineVin_Search].[@rankLimit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_Search].[#t].[SortOrder]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[#t]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[Wine_VinN_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[Wine_VinN_GroupID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[WF_StatusID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[locCountryID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[locRegionID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[locLocationID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[locLocaleID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[locSiteID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[ProducerID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[TypeID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[LabelID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[VarietyID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[DrynessID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[ColorID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_Search].[#t].[SortOrder]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[smallint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE1].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE1].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineLabel].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE1].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineLabel].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE1].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE2].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE2].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineLabel].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE2].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineLabel].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE2].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE3].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE3].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineProducer].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE3].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineProducer].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE3].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE4].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE4].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineVariety].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE4].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[WineVariety].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE4].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE5].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE5].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationSite].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE5].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationSite].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE5].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE6].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE6].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationLocale].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE6].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationLocale].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE6].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE7].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE7].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationLocation].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE7].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationLocation].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE7].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE8].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE8].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationRegion].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE8].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationRegion].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE8].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_Search].[CTE9].[f]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE9].[f].[ID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationCountry].[ID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE9].[f].[Name]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[LocationCountry].[Name]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[dbo].[WineVin_Search].[CTE9].[f].[SortOrder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_Search].[@SearchString]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_Search].[@FieldNameToSearch]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_Search].[@topNRows]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[100]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_Search].[@rankLimit]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_Search].[@isDebug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="413" />
				<Property Name="Length" Value="9705" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B&#xD;&#xA;-- Create date: 1/20/2014&#xD;&#xA;-- Description:&#x9;Returns list of Wine_VinN records containing @SearchString&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;Stored procedure requires input parameter @SearchString to be &#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;&quot;as user types&quot;, no special characters (*, %, etc.) required and none &#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;of them will have special meaning.&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[WineVin_Search]&#xD;&#xA;&#x9;@SearchString nvarchar(1024), &#xD;&#xA;&#x9;@FieldNameToSearch varchar(30) = NULL,&#xD;&#xA;&#x9;@topNRows int = 100, @rankLimit int = 0,&#xD;&#xA;&#x9;@isDebug bit = 0&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[dbo].[WineVin_SearchFT]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on
SET ARITHABORT ON
SET CONCAT_NULL_YIELDS_NULL ON
SET QUOTED_IDENTIFIER ON
SET ANSI_NULLS ON
SET ANSI_PADDING ON
SET ANSI_WARNINGS ON
SET NUMERIC_ROUNDABORT OFF

--select @SearchString = replace(replace(rtrim(ltrim(@SearchString)), '%', '*'), '  ', ' ')
--if lower(@FieldNameToSearch) = 'labelname' begin
--	-- applying macroses
--	select @SearchString = dbo.fn_GetAdjustedSearchString(@SearchString)
--end

if @isDebug = 1
	print @SearchString

--------- Results --------
create table #t (
	Wine_VinN_ID int not null, 
	Wine_VinN_GroupID int null,
	WF_StatusID int null,
	locCountryID int null, locRegionID int null, locLocationID int null, locLocaleID int null, locSiteID int null,
	ProducerID int null, TypeID int null, LabelID int null, VarietyID int null, DrynessID int null, ColorID int null,
	SortOrder smallint null
)

if lower(@FieldNameToSearch) = 'labelname' begin
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID, Wine_VinN_GroupID, Wine_VinN_WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = fts.RANK
	from vWineVinNDetails v
		join containstable(vWineVinNDetails, Label, @SearchString, @topNRows) fts
			on v.Wine_VinN_ID = fts.[KEY]
	where fts.RANK > @rankLimit
end else if lower(@FieldNameToSearch) = 'extendedlabel' begin
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID, Wine_VinN_GroupID, Wine_VinN_WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = fts.RANK
	from vWineVinNDetails v
		join containstable(vWineVinNDetails, (ProducerToShow, Label, Variety), @SearchString, @topNRows) fts
			on v.Wine_VinN_ID = fts.[KEY]
	where fts.RANK > @rankLimit
end else if lower(@FieldNameToSearch) = 'appellation' begin
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID, Wine_VinN_GroupID, Wine_VinN_WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = fts.RANK
	from vWineVinNDetails v
		join containstable(vWineVinNDetails, Appellation, @SearchString, @topNRows) fts
			on v.Wine_VinN_ID = fts.[KEY]
	where fts.RANK > @rankLimit
end else begin
	insert into #t
	select top(@topNRows)
		Wine_VinN_ID, Wine_VinN_GroupID, Wine_VinN_WF_StatusID,
		locCountryID, locRegionID, locLocationID, locLocaleID, locSiteID,
		ProducerID, TypeID, LabelID, VarietyID, DrynessID, ColorID,
		SortOrder = fts.RANK
	from vWineVinNDetails v
		join containstable(vWineVinNDetails, *, @SearchString, @topNRows) fts
			on v.Wine_VinN_ID = fts.[KEY]
	where fts.RANK > @rankLimit
end

if @@rowcount > 100 begin
	if @isDebug = 1
		print '--- Creating Index on #t ---'
	CREATE NONCLUSTERED INDEX [IX_t] ON #t (
		[ColorID] ASC
	) WITH (SORT_IN_TEMPDB = ON);
end

select --top(@topNRows)
	Wine_VinN_ID = r.Wine_VinN_ID, 
	Label = wl.Name,
	Producer = wp.Name, 
	ProducerToShow = wp.NameToShow,
	
	Country = lc.Name, Region = lr.Name, 
	Location = ll.Name, 
	Locale = lloc.Name, Site = ls.Name,
	Appellation = coalesce(
		nullif(ls.Name,''), nullif(lloc.name,''), nullif(ll.name,''), nullif(lr.name,''), nullif(lc.name,'')
	),
		
	Color = wc.Name,
	Variety = wv.Name, 
	Dryness = wd.Name,
	WineType = wt.Name, 

	WF_StatusID = r.WF_StatusID
from #t r
	join dbo.LocationCountry lc (nolock) on r.locCountryID = lc.ID
	join dbo.LocationRegion lr (nolock) on r.locRegionID = lr.ID
	join dbo.LocationLocation ll (nolock) on r.locLocationID = ll.ID
	join dbo.LocationLocale lloc (nolock) on r.locLocaleID = lloc.ID
	join dbo.LocationSite ls (nolock) on r.locSiteID = ls.ID

	join dbo.WineProducer wp (nolock) on r.ProducerID = wp.ID
	join dbo.WineType wt (nolock) on r.TypeID = wt.ID
	join dbo.WineLabel wl (nolock) on r.LabelID = wl.ID
	join dbo.WineVariety wv (nolock) on r.VarietyID = wv.ID
	join dbo.WineDryness wd (nolock) on r.DrynessID = wd.ID
	join dbo.WineColor wc (nolock) on r.ColorID = wc.ID
order by SortOrder, Label, Producer, Variety, Country

drop table #t

RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[@isDebug]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[@SearchString]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[@FieldNameToSearch]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Label]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[@topNRows]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_ID]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_GroupID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Wine_VinN_WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[ColorID]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[@rankLimit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[ProducerToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Variety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineVinNDetails].[Appellation]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[locCountryID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[locRegionID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[locLocationID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[locLocaleID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[locSiteID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[ProducerID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[TypeID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[VarietyID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[Wine_VinN_ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineProducer].[NameToShow]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationSite].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocale].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationLocation].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationRegion].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[LocationCountry].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineColor].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVariety].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineDryness].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[WF_StatusID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT].[#t].[SortOrder]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[dbo].[WineVin_SearchFT].[#t]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[Wine_VinN_ID]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[Wine_VinN_GroupID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[WF_StatusID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[locCountryID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[locRegionID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[locLocationID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[locLocaleID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[locSiteID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[ProducerID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[TypeID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[LabelID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[VarietyID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[DrynessID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[ColorID]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[dbo].[WineVin_SearchFT].[#t].[SortOrder]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[smallint]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_SearchFT].[@SearchString]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_SearchFT].[@FieldNameToSearch]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_SearchFT].[@topNRows]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[100]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_SearchFT].[@rankLimit]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[WineVin_SearchFT].[@isDebug]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="333" />
				<Property Name="Length" Value="4736" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- =============================================&#xD;&#xA;-- Author:&#x9;&#x9;Alex B&#xD;&#xA;-- Create date: 1/20/2014&#xD;&#xA;-- Description:&#x9;Returns list of Wine_VinN records containing @SearchString&#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;Stored procedure requires input parameter @SearchString to be well formatted for &#xD;&#xA;--&#x9;&#x9;&#x9;&#x9;CONTAINSTABLE&#xD;&#xA;-- =============================================&#xD;&#xA;CREATE PROCEDURE [dbo].[WineVin_SearchFT]&#xD;&#xA;&#x9;@SearchString nvarchar(1024), &#xD;&#xA;&#x9;@FieldNameToSearch varchar(30) = NULL,&#xD;&#xA;&#x9;@topNRows int = 100, @rankLimit int = 0,&#xD;&#xA;&#x9;@isDebug bit = 0&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[dbo].[WineVintage]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVintage].[ID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Property Name="IdentitySeed" Value="0" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVintage].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVintage].[created]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="75" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVintage].[updated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smalldatetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[WineVintage].[WF_StatusID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[smallint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="76" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="128" />
		</Element>
		<Element Type="SqlIndex" Name="[dbo].[WineVintage].[IX_WineVintage_Uniq]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[WineVintage].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[dbo].[WineVintage].[ID]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[WineVintage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[public].[dbo].[dbo].[Audit_Add]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[public]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Audit_Add]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[public].[dbo].[dbo].[Audit_GetLookupID]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[public]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Audit_GetLookupID]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[fn_GetAdjustedSearchString]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[fn_GetAdjustedSearchString]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[Location_GetLookupID]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Location_GetLookupID]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[Wine_GetList_ByVinID]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Wine_GetList_ByVinID]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[Wine_GetLookupID]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Wine_GetLookupID]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[Wine_SearchFT]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Wine_SearchFT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[WineProducer_GetList]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineProducer_GetList]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[WineVin_Search]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineVin_Search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_Customer].[dbo].[dbo].[WineVin_SearchFT]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[Audit_GetList]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Audit_GetList]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[fn_GetAdjustedSearchString]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[fn_GetAdjustedSearchString]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[fn_GetObjectDescription]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[fn_GetObjectDescription]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[Location_GetLookupID]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Location_GetLookupID]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[Wine_GetList_ByVinID]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Wine_GetList_ByVinID]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[Wine_GetLookupID]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Wine_GetLookupID]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[Wine_SearchFT]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[Wine_SearchFT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[WineProducer_Add]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineProducer_Add]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[WineProducer_Del]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineProducer_Del]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[WineProducer_GetList]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineProducer_GetList]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[WineProducer_Update]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineProducer_Update]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[WineVin_Search]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineVin_Search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Execute.Object].[RP_DataAdmin].[dbo].[dbo].[WineVin_SearchFT]">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[WineVin_SearchFT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.References.Object].[RP_Customer].[dbo].[dbo].[fn_GetAdjustedSearchString]">
			<Property Name="Permission" Value="5" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[fn_GetAdjustedSearchString]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.References.Object].[RP_DataAdmin].[dbo].[dbo].[fn_GetAdjustedSearchString]">
			<Property Name="Permission" Value="5" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[fn_GetAdjustedSearchString]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Select.Object].[public].[dbo].[dbo].[String2Table]">
			<Property Name="Permission" Value="2" />
			<Relationship Name="Grantee">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[public]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[String2Table]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Select.Object].[RP_Customer].[dbo].[dbo].[vWineDetails]">
			<Property Name="Permission" Value="2" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[vWineDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Select.Object].[RP_Customer].[dbo].[dbo].[vWineVinNDetails]">
			<Property Name="Permission" Value="2" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_Customer]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[vWineVinNDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Select.Object].[RP_DataAdmin].[dbo].[dbo].[vWineDetails]">
			<Property Name="Permission" Value="2" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[vWineDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPermissionStatement" Name="[Grant.Select.Object].[RP_DataAdmin].[dbo].[dbo].[vWineVinNDetails]">
			<Property Name="Permission" Value="2" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[RP_DataAdmin]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[vWineVinNDetails]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlRole" Name="[RP_Customer]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlRole" Name="[RP_DataAdmin]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextCatalog" Name="[RPOWine_FTSearchVin]">
			<Property Name="IsAccentSensitive" Value="True" />
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFullTextCatalog" Name="[RPOWine_FTSearchWine]">
			<Property Name="IsAccentSensitive" Value="True" />
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[srv]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[srv].[WineLabel_ResetDefaults]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on

begin tran 
	update WineLabel set DefaultColorID = -1, DefaultDrynessID = -1
	
	; with 
	tot as (
		select Label, LabelID, cnt = count(*)
		from vWineDetails
		where Label != ''
		group by Label, LabelID
	)
	, 
	stat as (
		select Label, LabelID, Dryness, DrynessID, Color, ColorID, cnt = count(*)
		from vWineDetails
		where Label != ''
		group by Label, LabelID, Dryness, DrynessID, Color, ColorID
	)
	--select stat.*, Total = tot.cnt, Prob = cast(stat.cnt as money) / tot.cnt
	update WineLabel set 
		DefaultColorID = stat.ColorID,
		DefaultDrynessID = stat.DrynessID
	from WineLabel 
		join tot on tot.LabelID = WineLabel.ID
		join stat on tot.LabelID = stat.LabelID
	where tot.cnt > 100 and (cast(stat.cnt as money) / tot.cnt) > 0.8	-- probability > 80%
commit tran

RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[WineLabel]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[DefaultDrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[Label]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[Dryness]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[DrynessID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[Color]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[WineLabel].[ID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[LabelID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[ColorID]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[vWineDetails].[DrynessID]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[money]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[tot]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[tot].[Label]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[Label]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[tot].[LabelID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[LabelID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[tot].[cnt]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat].[Label]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[Label]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat].[LabelID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[LabelID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat].[Dryness]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[Dryness]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat].[DrynessID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[DrynessID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat].[Color]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[Color]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat].[ColorID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[vWineDetails].[ColorID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[srv].[WineLabel_ResetDefaults].[CTE1].[stat].[cnt]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[srv]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1005" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE srv.WineLabel_ResetDefaults&#xD;&#xA;&#xD;&#xA;--&#xD;&#xA;-- Computes and resets default ColorID and DrynessID in WineLabel Table.&#xD;&#xA;-- Used to correctly form Name (computed).&#xD;&#xA;--&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlFilegroup" Name="[TasteNotes]" />
		<Element Type="SqlSchema" Name="[utils]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[utils].[tools_FullTextSearch_Set]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
set nocount on

declare @DBName varchar(30) = rtrim(db_name()),
		@FTCatalogName varchar(30)
		
--EXEC sp_fulltext_database @action = 'enable' 

-- register an empty stop list
CREATE FULLTEXT STOPLIST [RPOWineDataStopList]
AUTHORIZATION [dbo];

------------- Wines ----------
--EXEC sp_fulltext_catalog @ftcat = 'RPOWine_FTSearchWine', @action = 'create'

--CREATE FULLTEXT INDEX ON [dbo].[vWineDetails](
--[Color] LANGUAGE [English], 
--[Country] LANGUAGE [English], 
--[Dryness] LANGUAGE [English], 
--[Label] LANGUAGE [English], 
--[Locale] LANGUAGE [English], 
--[Location] LANGUAGE [English], 
--[Producer] LANGUAGE [English], 
--[Region] LANGUAGE [English], 
--[Site] LANGUAGE [English], 
--[Variety] LANGUAGE [English], 
--[Vintage] LANGUAGE [English], 
--[Type] LANGUAGE [English])
--KEY INDEX [PK_vWineDetails]ON ([RPOWine_FTSearchWine], FILEGROUP [WineIndx])
--WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF);

--------------------------------------------------------------------

RETURN 1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" Type="SqlUser" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[utils]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1365" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [utils].[tools_FullTextSearch_Set]&#xD;&#xA;--&#xD;&#xA;---------- setting up a full-text search catalog -------------&#xD;&#xA;--&#xD;&#xA;-- Do not forget to set 'text in row' option for a tables with varchar(max)-like fields&#xD;&#xA;--&#x9;exec sp_tableoption @TableNamePattern = '&lt;TableName&gt;', @OptionName = 'text in row', @OptionValue = '256' &#xD;&#xA;--&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlFilegroup" Name="[Wine]" />
		<Element Type="SqlFilegroup" Name="[WineIndx]" />
	</Model>
</DataSchemaModel>